(this.webpackJsonplogin=this.webpackJsonplogin||[]).push([[0],{154:function(e,t,n){e.exports=n(283)},159:function(e,t,n){},21:function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return p}));var a=n(25),r=n.n(a),c=n(43),o=n(24),l=n(44),i=n(34),s=n(30),u=Object(s.e)(),m=u-Math.floor(Date.now()/1e3)>0,d={firstName:null,id:null,lastName:null,role:null,token:s.a,username:null,isAuth:m,expTime:u||null},f=function(){return{type:"LOGOUT"}},p=function(e,t){return function(){var n=Object(c.a)(r.a.mark((function n(a){var c;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,l.a.login(e,t);case 3:c=n.sent,a({type:"SET_USER_DATA",payload:c.data}),localStorage.clear(),localStorage.setItem("token",c.data.token),localStorage.setItem("firstName",c.data.firstName),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),n.t0.response?n.t0.response.data&&a(Object(i.a)("loginForm",{_error:n.t0.response.data})):n.t0.request||a(Object(i.a)("loginForm",{_error:n.t0.message})),a(Object(i.a)("loginForm",{_error:"\u0421\u0435\u0440\u0432\u0435\u0440 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d"}));case 14:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(o.a)({},e,{},t.payload,{isAuth:!0,expTime:Object(s.b)(t.payload.token).exp});case"LOGOUT":return Object(o.a)({},e,{isAuth:!1});default:return e}}},283:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(56),o=n.n(c),l=(n(159),n(7)),i=n(123),s=n(122),u=n(21),m=n(82),d=Object(l.c)({auth:u.a,form:s.a,orders:m.b}),f=Object(l.e)(d,Object(l.a)(i.a));window.store=f;var p=f,b=n(18),h=n(28),v=n(8),E=n(87),g=n(30),N=function(e){return r.a.createElement("div",{className:"home-page site-wrap"},r.a.createElement(E.a,null),r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"my-3"},"\u041f\u0440\u0438\u0432\u0435\u0442, ",e.firstName?e.firstName:Object(g.c)(),"!"),r.a.createElement("h3",null,"\u0412\u0430\u0448\u0430 \u0440\u043e\u043b\u044c: ",e.role?e.role:Object(g.d)())))},O=n(83),w=Object(l.d)(O.a,Object(v.b)((function(e){return{isAuth:e.auth.isAuth,role:e.auth.role,firstName:e.auth.firstName}}),null))((function(e){return r.a.createElement(N,e)})),j=function(e){if(!e)return"Field is required"},y=n(120),k=n(121),S=n(32),x=function(e){var t=e.text,n=e.alertType,c=void 0===n?"warning":n,o=Object(a.useState)(!0),l=Object(S.a)(o,2),i=l[0],s=l[1];return i?r.a.createElement("div",{className:"alert alert-".concat(c," alert-dismissible fade show")},t,r.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:function(){s(!1)}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))):null},A=n(128),T=function(e){var t=e.input,n=e.meta,a=Object(A.a)(e,["input","meta"]),c=n.error&&n.touched;return r.a.createElement("div",null,r.a.createElement("input",Object.assign({},t,a,{className:c?"form-control border-error":"form-control"})),c&&r.a.createElement("span",{className:"required"},n.error))},R=Object(k.a)({form:"loginForm"})((function(e){var t=e.handleSubmit,n=e.error,a=e.submitting;return r.a.createElement("form",{className:"justify-content-center",onSubmit:t},n&&r.a.createElement(x,{text:n,alertType:"danger"}),r.a.createElement("div",{className:"form-group"},r.a.createElement(y.a,{name:"username",component:T,validate:[j],placeholder:"\u041b\u043e\u0433\u0438\u043d"})),r.a.createElement("div",{className:"form-group"},r.a.createElement(y.a,{name:"password",component:T,type:"password",validate:[j],placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"})),r.a.createElement("button",{className:"btn btn-primary",type:"submit",disabled:a},a&&r.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})," \u0412\u043e\u0439\u0442\u0438"))})),_=Object(v.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:u.b})((function(e){if(e.isAuth)return r.a.createElement(b.a,{to:"/"});return r.a.createElement("section",{className:"min-vh-100 login-page"},r.a.createElement("div",{className:"login-page-caption"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row text-white"},r.a.createElement("div",{className:"col-xl-5 col-lg-6 col-md-8 col-sm-10 mx-auto text-center form p-4"},r.a.createElement("h1",{className:"display-6 py-2"},"\u0412\u0445\u043e\u0434"),r.a.createElement("div",{className:"px-2"},r.a.createElement(R,{onSubmit:function(t){e.login(t)}})))))))})),C=function(e){return function(t){return r.a.createElement(r.a.Suspense,{fallback:r.a.createElement("div",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...")},r.a.createElement(e,t))}},D=r.a.lazy((function(){return n.e(4).then(n.bind(null,285))})),I=r.a.lazy((function(){return n.e(3).then(n.bind(null,286))})),U=function(e){return r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"/",exact:!0,render:function(){return r.a.createElement(w,null)}}),r.a.createElement(b.b,{path:"/login",render:function(){return r.a.createElement(_,null)}}),r.a.createElement(b.b,{path:"/orders",render:C(D)}),r.a.createElement(b.b,{path:"/order/:orderId",render:C(I)}))},W=function(e){return r.a.createElement(h.a,null,r.a.createElement(v.a,{store:p},r.a.createElement(U,null)))},G=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function F(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(W,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/sklad1",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/sklad1","/service-worker.js");G?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):F(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):F(t,e)}))}}()},30:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return l}));var a=localStorage.getItem("token"),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;try{return JSON.parse(atob(e.split(".")[1]))}catch(t){return null}},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;try{return JSON.parse(atob(e.split(".")[1])).exp}catch(t){return null}},o=function(){return localStorage.getItem("firstName")},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;try{return JSON.parse(atob(e.split(".")[1])).role}catch(t){return null}}},44:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l}));var a=n(24),r=n(124),c=r.create({baseURL:"http://109.86.230.142:50000",timeout:5e3,headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"}}),o={login:function(e){return c.post("users/authenticate",Object(a.a)({},e))}},l={getOrders:function(){return c.get("orders").then((function(e){return e.data})).catch((function(e){console.log(e)}))},getOrder:function(e){return c.get("orders/"+e).then((function(e){return e.data})).catch((function(e){console.log(e)}))},getOrderItem:function(e){return c.get("orders/item"+e).then((function(e){return e.data})).catch((function(e){console.log(e)}))}}},82:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return d}));var a=n(25),r=n.n(a),c=n(43),o=n(24),l=n(44),i={orders:[],order:[]},s=function(e){return{type:"GET_ORDERS",payload:e}},u=function(e){return{type:"GET_ORDER",payload:e}},m=function(){return function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.b.getOrders();case 2:n=e.sent,t(s(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},d=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.b.getOrder(e);case 2:a=t.sent,n(u(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ORDERS":return Object(o.a)({},e,{orders:t.payload});case"GET_ORDER":return Object(o.a)({},e,{order:t.payload});default:return e}}},83:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(84),r=n(85),c=n(86),o=n(88),l=n(0),i=n.n(l),s=n(18),u=n(8),m=function(e){return{isAuth:e.auth.isAuth}},d=function(e){var t=function(t){Object(o.a)(l,t);var n=Object(c.a)(l);function l(){return Object(a.a)(this,l),n.apply(this,arguments)}return Object(r.a)(l,[{key:"render",value:function(){return this.props.isAuth?i.a.createElement(e,this.props):i.a.createElement(s.a,{to:"/login"})}}]),l}(i.a.Component);return Object(u.b)(m)(t)}},87:function(e,t,n){"use strict";var a=n(32),r=n(0),c=n.n(r),o=n(28),l=n(47),i=n.n(l),s=function(e){var t=Object(r.useState)(""),n=Object(a.a)(t,2),o=n[0],l=n[1];return c.a.createElement("div",{className:"timer ".concat(o)},c.a.createElement(i.a,{initialTime:e.timer,direction:"backward",formatValue:function(e){return"".concat(e<10?"0".concat(e):e)},checkpoints:[{time:3e5,callback:function(){return l("new-timer")}},{time:0,callback:function(){return e.logout()}}]},(function(){return c.a.createElement("div",{className:"d-flex"},"  ",c.a.createElement("span",{className:"time-title d-none d-sm-block"},"\u0414\u043e \u043a\u043e\u043d\u0446\u0430 \u0441\u0435\u0441\u0441\u0438\u0438 ",c.a.createElement("span",{className:"dotter"},"-")),c.a.createElement("span",{className:"time-item"},c.a.createElement(i.a.Hours,{formatValue:function(e){return"".concat(e)}})),c.a.createElement("span",{className:"dotter"},":"),c.a.createElement("span",{className:"time-item"},c.a.createElement(i.a.Minutes,null)),c.a.createElement("span",{className:"dotter"},":"),c.a.createElement("span",{className:"time-item"},c.a.createElement(i.a.Seconds,{formatValue:function(e){return"".concat(e)}})))})))},u=n(8),m=n(21),d=Object(u.b)((function(e){return{expTime:e.auth.expTime}}),(function(e){return{logout:function(){localStorage.clear(),e(Object(m.c)())}}}))((function(e){var t=Math.floor(Date.now()/1e3),n=1e3*(e.expTime-t);return c.a.createElement(s,Object.assign({},e,{timer:n}))}));t.a=Object(u.b)((function(e){return{isAuth:e.auth.isAuth}}),(function(e){return{logout:function(){localStorage.clear(),e(Object(m.c)())}}}))((function(e){var t=Object(r.useState)(!1),n=Object(a.a)(t,2),l=n[0],i=n[1];return c.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",role:"navigation"},c.a.createElement("div",{className:"container justify-content-between align-content-start"},c.a.createElement("div",{className:"menu"},c.a.createElement("button",{className:"navbar-toggler",onClick:function(){i(!l)}},c.a.createElement("span",{className:"ti-view-list"})),c.a.createElement("div",{className:l?"menu bg-dark position-absolute p-3 collapse navbar-collapse show":"collapse navbar-collapse"},c.a.createElement("ul",{className:"navbar-nav"},c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.b,{to:"/",className:" nav-link"},c.a.createElement("span",{className:"ti-user"})," \u041f\u0440\u043e\u0444\u0438\u043b\u044c")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.b,{to:"/orders",className:"nav-link"},c.a.createElement("span",{className:"ti-layers"})," \u041d\u0430\u043a\u043b\u0430\u0434\u043d\u044b\u0435"))))),c.a.createElement(d,null),e.isAuth?c.a.createElement("div",{className:"pl-3"},c.a.createElement("span",{onClick:e.logout,className:"btn btn-info small ti-unlock btn-sm"})):""))}))}},[[154,1,2]]]);
//# sourceMappingURL=main.fcb6d059.chunk.js.map